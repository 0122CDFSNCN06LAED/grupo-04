<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../partials/head.ejs") %>
        <link rel="stylesheet" href="/css/home.css" />
        <link rel="stylesheet" href="/css/formularios.css" />
        <title>Crear un nuevo producto</title>
</head>

<% if(locals.isLogged) {%>

    <body class="bg-black">
        <%- include("../partials/header.ejs") %>
            <main class="container m-15 mb-10">

                <form action="/products/create" method="POST" enctype="multipart/form-data">
                    <input type="hidden">
                    <div class="row">
                        <div class="col-12">
                            <h2 class="titulo-fomulario text-center celeste-vpm">Creando un nuevo producto</i>
                            </h2>
                        </div>
                        <div class="col-12 col-md-6">
                            <label class="form-label celeste-vpm" for="name">Nombre del producto</label>
                            <input class="form-control" type=" text " id="productName " name="productName" value="<%= locals.oldData ? oldData.productName : null%>">
                            <% if (locals.errors && errors.productName) { %>
                                <div class="text-danger">
                                    <%= errors.productName.msg %>
                                </div>
                                <% } %>
                        </div>

                        <div class="col-12 col-md-6">
                            <label class="form-label celeste-vpm" for="name">Descripcion del producto</label>
                            <input class="form-control" type=" text " id="description " name="description" value="<%= locals.oldData ? oldData.description : null%>">
                            <% if (locals.errors && errors.description) { %>
                                <div class="text-danger">
                                    <%= errors.description.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label celeste-vpm" for="models">Modelo</label>
                            <select name="models" id="models" class="form-control">
                            <% for(let i=0; i<m.length; i++){ %> 
                               <option value="<%= m[i].id %> "><%= m[i].name %></option> 
                                <% } %> 
                        </select>
                            <% if (locals.errors && errors.models) { %>
                                <div class="text-danger">
                                    <%= errors.models.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label celeste-vpm" for="price">Precio</label>
                            <input class="form-control" type="text" id="price" name="price" value="<%= locals.oldData ? oldData.price : null%>">
                            <% if (locals.errors && errors.price) { %>
                                <div class="text-danger">
                                    <%= errors.price.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label celeste-vpm" for="minBuy">Minimo a comprar</label>
                            <input class="form-control" type="text" id="minBuy" name="minBuy" value="<%= locals.minBuy ? oldData.minBuy : null%>">
                            <% if (locals.errors && errors.minBuy) { %>
                                <div class="text-danger">
                                    <%= errors.minBuy.msg %>
                                </div>
                                <% } %>
                        </div>


                        <!-- <div class="col-md-6 "><label class="form-label celeste-vpm " for="stock ">Stock</label>
                        <input class="form-control " type=" text " id="stock " name="stock " value=" ">
                    </div>-->

                        <div class="col-md-6 ">
                            <label class="form-label celeste-vpm " for="category ">Categoria</label>
                            <!--
                         <% for(let i=0; i<c.length; i++){ %> 
                            <input type="checkbox " id="cat<%=c [i].id %>">
                                <%= c[i].name %><br>

                                    <% } %>
                                        -->
                            <select name="category" id="category" class="form-control">
                            <% for(let i=0; i<c.length; i++){ %> 
                               <option value="<%= c[i].id %> "><%= c[i].name %></option> 
                                <% } %> 
                        </select>
                            <% if (locals.errors && errors.category) { %>
                                <div class="text-error">
                                    <%= errors.category.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="col-md-6"><label class="form-label celeste-vpm" for="img">Imagen</label>
                            <input class="form-control" type="file" id="img" name="img" value="<%= locals.oldData ? oldData.productImages : null%>">
                            <% if (locals.errors && errors.productImages) { %>
                                <div class="text-danger">
                                    <%= errors.productImages.msg %>
                                </div>
                                <% } %>

                        </div>
                        <div class="col-12 d-flex justify-content-center mt-5">
                            <button class=" btn btn-outline-info mb-5 w-50 " type="submit ">Crear</button>
                            <button class="btn btn-secondary mb-5 w-50" type="reset">Borrar todo</button>
                        </div>
                    </div>


            </main>
            <%- include("../partials/footer.ejs") %>
    </body>
    <% } else {%>
        logearse
        <% } %>

</html>